<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

{% seo %}
    <link rel="stylesheet" href="{{ "/assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}">
    {% include head-custom.html %}
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      {% if site.title and site.title != page.title %}
      <h1><a href="{{ "/" | absolute_url }}">{{ site.title }}</a></h1>
      {% endif %}
      
      {% include navigation.html %}

      {{ content }}

      {% if site.github.private != true and site.github.license %}
      <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
        This site is open source. {% github_edit_link "Improve this page" %}.
      </div>
      {% endif %}
    </div>
    
    <!-- Mermaid JS -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@8.14.0/dist/mermaid.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize mermaid with configuration
        mermaid.initialize({
          startOnLoad: true,
          theme: 'default',
          securityLevel: 'loose',
          flowchart: { 
            useMaxWidth: true, 
            htmlLabels: true,
            curve: 'basis'
          }
        });
        
        // Force render all mermaid diagrams
        setTimeout(function() {
          try {
            mermaid.init(undefined, '.mermaid');
            console.log('Mermaid diagrams initialized successfully');
          } catch (e) {
            console.error('Mermaid initialization error:', e);
          }
        }, 500);
      });
    </script>
    <script src="{{ '/assets/js/mermaid-init.js' | relative_url }}"></script>
  </body>
</html>
